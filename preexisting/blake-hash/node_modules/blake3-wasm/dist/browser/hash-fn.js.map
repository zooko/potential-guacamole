{"version":3,"file":"hash-fn.js","sourceRoot":"","sources":["../../src/browser/hash-fn.ts"],"names":[],"mappings":";;;AAAA,4DAMgC;AAChC,yDAAkE;AAClE,uCAAiC;AAEjC;;GAEG;AACH,SAAgB,IAAI,CAClB,KAAgB,EAChB,EAAE,MAAM,GAAG,mCAAiB,KAAuB,EAAE;IAErD,MAAM,IAAI,GAAG,IAAI,cAAI,CAAC,MAAM,CAAC,CAAC;IAC9B,IAAI,CAAC,GAAG,CAAC,IAAA,6BAAW,EAAC,IAAA,8BAAY,EAAC,KAAK,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC;IACnD,OAAO,IAAI,CAAC;AACd,CAAC;AAPD,oBAOC;AAED;;;;GAIG;AACH,SAAgB,SAAS,CACvB,OAAkB,EAClB,QAAmB,EACnB,EAAE,MAAM,GAAG,mCAAiB,KAAuB,EAAE;IAErD,MAAM,MAAM,GAAG,IAAA,kCAAe,EAAC,OAAO,CAAC,CAAC;IACxC,MAAM,CAAC,MAAM,CAAC,IAAA,8BAAY,EAAC,QAAQ,CAAC,CAAC,CAAC;IACtC,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC;IACzC,MAAM,CAAC,OAAO,EAAE,CAAC;IACjB,OAAO,MAAM,CAAC;AAChB,CAAC;AAVD,8BAUC;AAED;;GAEG;AACH,SAAgB,SAAS,CACvB,GAAc,EACd,KAAgB,EAChB,EAAE,MAAM,GAAG,mCAAiB,KAAuB,EAAE;IAErD,MAAM,KAAK,GAAG,IAAA,8BAAW,EAAC,IAAA,8BAAY,EAAC,GAAG,CAAC,CAAC,CAAC;IAC7C,KAAK,CAAC,MAAM,CAAC,IAAA,8BAAY,EAAC,KAAK,CAAC,CAAC,CAAC;IAClC,MAAM,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC;IACxC,KAAK,CAAC,OAAO,EAAE,CAAC;IAChB,OAAO,MAAM,CAAC;AAChB,CAAC;AAVD,8BAUC","sourcesContent":["import {\n  defaultHashLength,\n  HashInput,\n  hashOneShot,\n  IBaseHashOptions,\n  inputToArray,\n} from '@c4312/blake3-internal';\nimport { createDeriveKey, createKeyed } from './hash-instance.js';\nimport { Hash } from './hash.js';\n\n/**\n * Returns a blake3 hash of the input.\n */\nexport function hash(\n  input: HashInput,\n  { length = defaultHashLength }: IBaseHashOptions = {},\n): Hash {\n  const hash = new Hash(length);\n  hash.set(hashOneShot(inputToArray(input), length));\n  return hash;\n}\n\n/**\n * Given cryptographic key material  and a context string, services a subkey of\n * any length. See {@link https://docs.rs/blake3/0.1.3/blake3/fn.derive_key.html}\n * for more information.\n */\nexport function deriveKey(\n  context: HashInput,\n  material: HashInput,\n  { length = defaultHashLength }: IBaseHashOptions = {},\n) {\n  const derive = createDeriveKey(context);\n  derive.update(inputToArray(material));\n  const digest = derive.digest({ length });\n  derive.dispose();\n  return digest;\n}\n\n/**\n * The keyed hash function. See {@link https://docs.rs/blake3/0.1.3/blake3/fn.keyed_hash.html}.\n */\nexport function keyedHash(\n  key: HashInput,\n  input: HashInput,\n  { length = defaultHashLength }: IBaseHashOptions = {},\n) {\n  const keyed = createKeyed(inputToArray(key));\n  keyed.update(inputToArray(input));\n  const digest = keyed.digest({ length });\n  keyed.dispose();\n  return digest;\n}\n"]}